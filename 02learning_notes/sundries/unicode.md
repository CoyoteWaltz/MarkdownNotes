# About Unicode

> å‚è€ƒ
>
> - [è¿™ç¯‡ blog](https://blog.xinshijiededa.men/unicode/)ï¼Œå†™çš„å¾ˆä¸é”™
> - [ç”¨æ­£åˆ™åŒ¹é… emoji](https://taxodium.ink/post/emoji-regexp/)

> æ²¡æœ‰æ‰€è°“çš„çº¯æ–‡æœ¬ã€‚
>
> æ–‡æœ¬éƒ½æ˜¯ç»è¿‡*ç¼–ç *çš„

ï¼ˆä¸ªäººç†è§£ï¼‰å›åˆ°å°ç™½è§†è§’ï¼Œä½•ä¸ºå­—ç¬¦ç¼–ç ï¼Ÿ

- è®¡ç®—æœºè¯†åˆ«åˆ°æŸä¸ªç ä½ï¼Œå°†å…¶æ˜ å°„æˆæŸä¸ªå­—ç¬¦å±•ç¤ºçš„è¿‡ç¨‹
  - ç ä½ï¼šå¯ä»¥ç†è§£ä¸ºå­—ç¬¦æ˜ å°„è¡¨ä¸­çš„ keyï¼Œç”±ç‰¹å®šçš„æ•°å€¼ç»„æˆ
    - ä¸¾ä¸ªï¼ˆä¸çœŸå®çš„ï¼‰ä¾‹å­ï¼š1 å¯¹åº”â€œäººâ€ï¼Œ2 å¯¹åº”â€œğŸ˜‹â€

## Unicode æ˜¯ä»€ä¹ˆï¼Ÿ

Unicode æ˜¯ä¸€ä¸ªå°†ä¸åŒå­—ç¬¦åˆ†é…ç»™å”¯ä¸€ç¼–å·çš„è¡¨æ ¼ã€‚

Unicode æœ‰å¤šå¤§ï¼Ÿ

ç›®å‰ï¼Œå·²è¢«å®šä¹‰çš„æœ€å¤§ç ä½æ˜¯ 0x10FFFFã€‚è¿™ç»™äº†æˆ‘ä»¬å¤§çº¦ 110 ä¸‡ä¸ªç ä½çš„ç©ºé—´ã€‚

ç›®å‰å·²å®šä¹‰äº†å¤§çº¦ 17 ä¸‡ä¸ªç ä½ï¼Œå  15%ã€‚å¦å¤– 11% ç”¨äºç§**æœ‰ä½¿ç”¨**ã€‚å…¶ä½™çš„å¤§çº¦ 80 ä¸‡ä¸ªç ä½ç›®å‰æ²¡æœ‰åˆ†é…ã€‚å®ƒä»¬å¯èƒ½åœ¨æœªæ¥å˜æˆå­—ç¬¦ã€‚

ç§ç”¨åŒºï¼šä¸ºç¨‹åºå¼€å‘äººå‘˜ä¿ç•™çš„ï¼Œunicode æ°¸è¿œä¸ä¼šå®šä¹‰ä»–ä»¬

å‰ç¼€ `U+` è¡¨ç¤ºçš„å°±æ˜¯ Unicodeï¼Œæœ€é«˜å®šä¹‰çš„ç ä½æ˜¯ `U+10FFFF`ï¼ˆ16 è¿›åˆ¶ï¼‰

## UTF-8 æ˜¯ä»€ä¹ˆ

**ä¸€ç§ç¼–ç **ï¼Œæ˜¯ unicode çš„ä¸€ç§ç¼–ç 

> ä¸€å¼€å§‹è¯´çš„æ–‡æœ¬ç¼–ç ï¼Œä» è®¡ç®—æœº â†’ æ–‡æœ¬å±•ç¤º çš„è§’åº¦çœ‹ï¼Œå°±æ˜¯å°†ç ä½æ˜ å°„æˆæ–‡æœ¬å›¾æ¡ˆï¼Œåä¹‹äº¦ç„¶
>
> è¿™é‡Œçš„å°† unicode â†’ utf-8 çš„ç¼–ç ä¹Ÿæ˜¯ä¸€ç§æ˜ å°„ï¼Œç›®çš„æ˜¯ä¸ºäº†æ›´å¥½çš„èŠ‚çœå­—ç¬¦æ‰€éœ€çš„ç©ºé—´è€Œåšçš„ä¼˜åŒ–

æœ€ç®€å•çš„ unicode ç¼–ç æ˜¯ utf-32ï¼Œå³ä¸€å…±ç”¨ 32 ä½æ¥å­˜å‚¨ä¸€ä¸ª unicodeï¼Œ`U+1F4A9` å˜ä¸º `00 01 F4 A9`ï¼Œå ç”¨ 4 ä¸ªå­—èŠ‚ï¼ŒUnicode æ‰€æœ‰ç ä½éƒ½é€‚åˆã€‚

`utf-8` `utf-16` ç›¸å¯¹å¤æ‚ä¸€äº›ï¼Œä½†ä¹Ÿæ˜¯å°†ç ä½ä½œä¸º**å­—èŠ‚**è¿›è¡Œç¼–ç 

### UTF-8 æœ‰å¤šå°‘å­—èŠ‚ï¼Ÿ

é¦–å…ˆä»–æ˜¯ä¸€ç§**å˜é•¿**ç¼–ç ï¼Œç ä½å¯èƒ½è¢«ç¼–ç ï¼ˆæ˜ å°„ï¼‰ä¸º 1 åˆ° 4 ä¸ªå­—èŠ‚çš„åºåˆ—

| ç ä½                | å­—èŠ‚                                         |
| ------------------- | -------------------------------------------- |
| U+`0000`..`007F`    | `0xxxxxxx`                                   |
| U+`0080`..`07FF`    | `110xxxxx` `10xxxxxx`                        |
| U+`0800`..`FFFF`    | `1110xxxx ` `10xxxxxx` `10xxxxxx`            |
| U+`10000`..`10FFFF` | `11110xxx ` `10xxxxxx` `10xxxxxx` `10xxxxxx` |

ä¸ Unicode è¡¨ç»“åˆèµ·æ¥ï¼Œå°±å¯ä»¥çœ‹åˆ°è‹±è¯­ä½¿ç”¨ 1 ä¸ªå­—èŠ‚è¿›è¡Œç¼–ç ï¼Œè¥¿é‡Œå°”è¯­ã€æ‹‰ä¸è¯­ã€å¸Œä¼¯æ¥è¯­å’Œé˜¿æ‹‰ä¼¯è¯­éœ€è¦ 2 ä¸ªå­—èŠ‚ï¼Œä¸­æ–‡ã€æ—¥æ–‡ã€éŸ©æ–‡ã€å…¶ä»–äºšæ´²è¯­è¨€å’Œ Emoji éœ€è¦ 3 ä¸ªæˆ– 4 ä¸ªå­—èŠ‚ã€‚

å‡ ä¸ªç‰¹ç‚¹/äº®ç‚¹ï¼š

1. å®Œå…¨ä¸ ASCII å…¼å®¹ï¼Œ0-127 å°±æ˜¯ ASCIIï¼Œä¸¤è€…å¯ä»¥ç­‰ä»·
2. å¯¹äºåŸºæœ¬çš„é˜¿æ‹‰ä¸è¯­æ¥è¯´å¯ä»¥èŠ‚çœç©ºé—´
3. **è‡ªå¸¦é”™è¯¯æ£€æµ‹å’Œé”™è¯¯æ¢å¤çš„åŠŸèƒ½**ï¼Œç¬¬ä¸€ä¸ªå­—èŠ‚çš„å‰ç¼€æ€»ä¸ç¬¬ 2-4 ä¸ªå­—èŠ‚ä¸åŒï¼Œæ€»æ˜¯å¯ä»¥åˆ¤æ–­å½“å‰æ˜¯å¦åœ¨æŸ¥çœ‹å®Œæ•´ä¸”æœ‰æ•ˆçš„ utf8 å­—ç¬¦åºåˆ—ï¼ˆä¾‹å¦‚è·³è½¬åˆ°æŸä¸ªå­—èŠ‚ï¼Œå‘å‰æˆ–å‘åæ‰¾åˆ°æ­£ç¡®çš„åºåˆ—å¼€å¤´ï¼‰

è¿™å¸¦æ¥äº†ä¸€äº›é‡è¦çš„ç»“è®ºï¼š

- ä½ **ä¸èƒ½**é€šè¿‡è®¡æ•°å­—èŠ‚æ¥ç¡®å®šå­—ç¬¦ä¸²çš„é•¿åº¦ã€‚
- ä½ **ä¸èƒ½**éšæœºè·³åˆ°å­—ç¬¦ä¸²çš„ä¸­é—´å¹¶å¼€å§‹è¯»å–ã€‚
- ä½ **ä¸èƒ½**é€šè¿‡åœ¨ä»»æ„å­—èŠ‚åç§»å¤„åˆ‡å‰²æ¥è·å–å­å­—ç¬¦ä¸²ã€‚ä½ å¯èƒ½ä¼šåˆ‡æ‰å­—ç¬¦çš„ä¸€éƒ¨åˆ†ã€‚

è¯•å›¾è¿™æ ·åšçš„äººæœ€ç»ˆä¼šé‡åˆ°è¿™ä¸ªåå°å­ï¼šï¿½

### ï¿½ æ˜¯ä»€ä¹ˆï¼Ÿ

`U+FFFD` æ›¿æ¢å­—ç¬¦ï¼Œå½“åº”ç”¨å’Œåº“æ£€æµ‹åˆ° Unicode é”™è¯¯æ˜¯ï¼Œå°±å¯ä»¥ä½¿ç”¨å®ƒï¼Œæ¥æ˜¾ç¤ºé”™è¯¯

**æ‰©å±•å­—ä½ç°‡**ï¼ˆextended grapheme clusterï¼‰ï¼Œè¿™é‡Œç®€ç§°*å­—ä½*

å­—ä½ï¼ˆgraphemeï¼Œæˆ–è¯‘ä½œå­—ç´ ï¼‰ï¼Œæ˜¯åœ¨ç‰¹å®šä¹¦å†™ç³»ç»Ÿçš„ä¸Šä¸‹æ–‡ä¸­æœ€å°çš„å¯åŒºåˆ†çš„ä¹¦å†™å•ä½ã€‚ä¹Ÿæ˜¯æˆ‘ä»¬å®é™…ï¼ˆå¼€å‘è¿‡ç¨‹ä¸­ï¼‰éœ€è¦æ“ä½œçš„æœ€å°å•ä½ï¼ˆå­—ç¬¦ï¼‰

é—®é¢˜æ˜¯ï¼Œåœ¨ Unicode ä¸­ï¼Œä¸€äº›å­—ä½ä½¿ç”¨å¤šä¸ªç ä½è¿›è¡Œç¼–ç ï¼

- æ¯”å¦‚è¯´ï¼Œ`eÌ`ï¼ˆä¸€ä¸ªå•ç‹¬çš„å­—ä½ï¼‰åœ¨ Unicode ä¸­è¢«ç¼–ç ä¸º `e`ï¼ˆU+0065 æ‹‰ä¸å°å†™å­—æ¯ Eï¼‰+ `Â´`ï¼ˆU+0301 è¿æ¥é‡éŸ³ç¬¦ï¼‰ã€‚ä¸¤ä¸ªç ä½ï¼

**æ‰€ä»¥å°±æ˜¯ä¸ºä»€ä¹ˆä¸è¦æ“ä½œå­—ç¬¦ç¼–ç çš„å­—èŠ‚ã€‚ã€‚**

ä¸€ä¸ªæ‰©å±•å­—ä½ç°‡æ˜¯ä¸€ä¸ªæˆ–å¤šä¸ª Unicode ç ä½çš„åºåˆ—ï¼Œå¿…é¡»è¢«è§†ä¸ºä¸€ä¸ªå•ç‹¬çš„ã€ä¸å¯åˆ†å‰²çš„å­—ç¬¦ã€‚

### `"ğŸ¤¦ğŸ¼â€â™‚ï¸".length` æ˜¯ä»€ä¹ˆï¼Ÿ

pythonã€Java/JavaScript/C#ã€Rust å¾—åˆ°ä¸ä¸€æ ·çš„å€¼ã€‚ã€‚ã€‚

ä¸€ä¸ªä¸è¢«è®¡ç®—æœºå†…éƒ¨æ‹–ç´¯çš„äººï¼Œä»–ç»™çš„ç­”æ¡ˆå°±æ˜¯ 1ï¼è€Œåªæœ‰ swift è¿™é—¨ç°ä»£è¯­è¨€æ˜¯æ­£ç¡®çš„

1. å†…éƒ¨ï¼Œé¢å‘è®¡ç®—æœºçš„ä¸€å±‚ï¼Œå¯¹å­—ç¬¦ä¸²çš„è¡¨è¾¾ï¼Œéƒ½æ˜¯é‡‡ç”¨ utf-8 ä¹‹ç±»çš„ç¼–ç æ ¼å¼ï¼Œå¹¶ä¸ä¼šåˆ†æä»–ä¹‹äºäººç±»çš„å«ä¹‰
2. å¤–éƒ¨ï¼Œé¢å‘äººç±»çš„ APIï¼ŒUI çš„å­—æ•°ç»Ÿè®¡ï¼ŒSwift ä¼šç»™å‡ºä¸€ä¸ªè¯•å›¾

`"áº‡Í“ÌÍ’ÍŸÍ¡Ç«Ì Ì Ì‰ÌÍ Í¡Í…rÌ¬ÌºÍšÌÍ›Ì”Í’Í¢dÌ ÍÌ—Ì³Í‡Í†Ì‹ÌŠÍ‚Í".length"`

Unicode çš„è§„åˆ™ä¸€ç›´åœ¨å˜åŒ–ï¼å¤§æ¦‚ä» 2014 å¹´å¼€å§‹ï¼ŒUnicode æ¯å¹´éƒ½ä¼šå‘å¸ƒä¸€æ¬¡ä¸»è¦ä¿®è®¢ç‰ˆã€‚è¿™å°±æ˜¯ä½ è·å¾—æ–°çš„ emoji çš„åœ°æ–¹â€”â€”Android å’Œ iOS çš„æ›´æ–°é€šå¸¸åŒ…æ‹¬æœ€æ–°çš„ Unicode æ ‡å‡†ã€‚

```javascript
"AÌŠ" === "Ã…"; // false
"Ã…" === "â„«"; // false
"AÌŠ" === "â„«"; // false è›¤è›¤
```

NFD å’Œ NFC è¢«ç§°ä¸ºã€Œè§„èŒƒå½’ä¸€åŒ–ã€ã€‚å¦å¤–ä¸¤ç§å½¢å¼æ˜¯ã€Œå…¼å®¹å½’ä¸€åŒ–ã€ï¼Œä¸Šé¢å­—ç¬¦å°±æ˜¯ä»å­—ä½ç°‡å½’ä¸€åŒ–åˆ°äº†ä¸€ä¸ª unicode

**NFKD** å°è¯•å°†æ‰€æœ‰ä¸œè¥¿åˆ†è§£å¼€æ¥ï¼Œå¹¶ç”¨é»˜è®¤çš„æ›¿æ¢è§†è§‰å˜ä½“ã€‚

**NFKC** å°è¯•å°†æ‰€æœ‰ä¸œè¥¿ç»„åˆèµ·æ¥ï¼ŒåŒæ—¶ç”¨é»˜è®¤çš„æ›¿æ¢è§†è§‰å˜ä½“ã€‚

## Unicode æ˜¯åŸºäºåŒºåŸŸè®¾ç½®çš„

è®¡ç®—æœºå¦‚ä½•çŸ¥é“ä½•æ—¶å‘ˆç°ä¿åŠ åˆ©äºšå¼å­—å½¢ï¼Œä½•æ—¶ä½¿ç”¨ä¿„è¯­å­—å½¢ï¼Ÿ

ç®€çŸ­çš„å›ç­”ï¼šå®ƒä¸çŸ¥é“ã€‚ä¸å¹¸çš„æ˜¯ï¼ŒUnicode ä¸æ˜¯ä¸€ä¸ªå®Œç¾çš„ç³»ç»Ÿï¼Œå®ƒæœ‰å¾ˆå¤šç¼ºç‚¹ã€‚å…¶ä¸­ä¹‹ä¸€å°±æ˜¯æ˜¯å°†ç›¸åŒçš„ç ä½åˆ†é…ç»™åº”è¯¥çœ‹èµ·æ¥ä¸åŒçš„å­—å½¢ï¼Œæ¯”å¦‚è¥¿é‡Œå°”å°å†™å­—æ¯ K å’Œä¿åŠ åˆ©äºšè¯­å°å†™å­—æ¯ Kï¼ˆéƒ½æ˜¯ `U+043A`ï¼‰ã€‚

è®¸å¤šä¸­æ–‡ã€æ—¥æ–‡å’ŒéŸ©æ–‡çš„è±¡å½¢æ–‡å­—è¢«åˆ†é…äº†ç›¸åŒçš„ç ä½

### ä¸ºä»€ä¹ˆ `String::toLowerCase()` çš„å‚æ•°ä¸­æœ‰ä¸ªåŒºåŸŸè®¾ç½®ï¼Ÿ

```javascript
var en_US = new Intl.Locale("en", "US");
var tr = new Intl.Locale("tr");

"I".toLowerCase(en_US); // => "i"
"I".toLowerCase(tr); // => "Ä±"

"i".toUpperCase(en_US); // => "I"
"i".toUpperCase(tr); // => "Ä°"'
```

ä¾ç„¶åº”è¯¥ã€‚å³ä½¿æ˜¯çº¯è‹±æ–‡æ–‡æœ¬ä¹Ÿä½¿ç”¨äº†è®¸å¤š ASCII ä¸­æ²¡æœ‰çš„ã€Œæ’ç‰ˆç¬¦å·ã€

## ä»€ä¹ˆæ˜¯ä»£ç†å¯¹ï¼Ÿ

ä»£ç†å¯¹ï¼ˆsurrogate pairï¼‰æ˜¯ç”¨äºç¼–ç å•ä¸ª Unicode ç ä½çš„ä¸¤ä¸ª UTF-16 å•ä½ã€‚ä¾‹å¦‚ï¼Œ`D83D DCA9`ï¼ˆä¸¤ä¸ª 16 ä½å•ä½ï¼‰ç¼–ç äº†ä¸€ä¸ªç ä½ï¼Œ`U+1F4A9`ã€‚

ä½†æ˜¯åæ¥å‘ç° 65535 å¹¶ä¸è¶³ä»¥è¡¨è¾¾æ‰€æœ‰å­—ç¬¦ï¼Œ16 ä½ä¸å¤Ÿï¼Œé‚£å°±éœ€è¦å¢åŠ  Unicode å»è¡¨è¾¾æ›´å¤šå­—ç¬¦ã€‚

å®ç°çš„æ–¹æ³•å°±æ˜¯å®šä¹‰äº† **ä»£ç†å¯¹ (Surrogates pairs)** , ä»£ç†å¯¹ç”± 20 ä½ç»„æˆã€‚

è§„å®šå‰ 10 ä½ä½œä¸º **é«˜ä»£ç†ä½ (high-surrogate)** ï¼Œå–å€¼èŒƒå›´æ˜¯ 0xD800 - 0xDBFFã€‚

å 10 ä½ä¸º **ä½ä»£ç†ä½ (low-surrogate)** ï¼Œå–å€¼èŒƒå›´æ˜¯ 0xDC00 - 0xDFFFã€‚

é«˜ä»£ç†ä½å’Œä½ä»£ç†ä½ç»„æˆä»£ç†å¯¹ (surrogate pairs) ã€‚

ç”±äºæœ‰ 20 ä½çš„é•¿åº¦ï¼Œå› æ­¤å¯ä»¥è¡¨è¾¾ 1048576 ä¸ªå­—ç¬¦ï¼Œå¯ä»¥åœ¨åŸæ¥ 65536 ä¸ªå­—ç¬¦ä¹‹ä¸Šï¼Œå†å¢åŠ  1048576 ä¸ªå­—ç¬¦ã€‚

ä¸ºä»€ä¹ˆ Unicode è¦è¿™ä¹ˆè®¾è®¡ï¼Œå¯ä»¥å‚è€ƒ [Why does code points between U+D800 and U+DBFF generate one-length string in ECMAScript 6?](https://stackoverflow.com/questions/42181070/why-does-code-points-between-ud800-and-udbff-generate-one-length-string-in-ecm)

ä¸ºä»€ä¹ˆé«˜ä»£ç†å’Œä½ä»£ç†è¿™ä¹ˆå–å€¼ï¼Œå¯ä»¥å‚è€ƒ [How was the position of the Surrogates Area (UTF-16) chosen?](https://stackoverflow.com/questions/5178202/how-was-the-position-of-the-surrogates-area-utf-16-chosen)ï¼‰

æ¦‚æ‹¬æ¥è¯´ï¼Œå°±æ˜¯åœ¨ JavaScript çš„ String ä¸­å¸¸ç”¨çš„å­—ç¬¦ï¼ˆå¦‚å­—æ¯ï¼Œæ•°å­—ï¼Œæ±‰å­—ï¼‰æ˜¯ç”± 1 ä¸ª UTF-16 ç¼–ç å•å…ƒè¡¨ç¤ºçš„ã€‚

è€Œè¶…å‡º 65535 (0xFFFF, U+FFFF, \uFFFF) å­—ç¬¦ï¼ˆå¦‚ Emojiï¼‰ï¼Œåˆ™ç”±ä»£ç†å¯¹è¡¨ç¤ºï¼ˆé«˜ä»£ç†+ä½ä»£ç†ï¼Œ2 ä¸ª UTF-16 ç¼–ç å•å…ƒï¼‰ã€‚

### åœ¨ JavaScript ä¸­ string

lengthï¼šè¦æ³¨æ„æ˜¯ä¸æ˜¯ä»£ç†å¯¹

```javascript
"ğŸŒ·ğŸ‰".length; // 4 è¿™ä¸¤ä¸ª emoji éƒ½æ˜¯ä»£ç†å¯¹
```

è·å¾— utf16 ç¼–ç 

```javascript
"ğŸ‰".split(""); // [ '\ud83c', '\ude50' ]
"ğŸ‰".charCodeAt(0); // 55356
"ğŸ‰".charCodeAt(1); // 56912
String.fromCharCode(55356, 56912); // 'ğŸ‰'
```

## JavaScript è·å¾—çœŸæ­£çš„ length

```javascript
"ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„".length; // 20
console.log(Array.from("ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„").length); // 10
console.log(Array.from("ğŸš´ğŸ»ğŸ‘ŒğŸ»ğŸ™ğŸ»ğŸ’ªğŸ»ğŸš´ğŸ»ğŸ‘ŒğŸ»ğŸ™ğŸ»ğŸ’ªğŸ»ğŸš´ğŸ»ğŸ‘ŒğŸ»").length); // 10
```

## æ€»ç»“

- Unicode å·²ç»èµ¢äº†ã€‚
- UTF-8 æ˜¯ä¼ è¾“å’Œå‚¨å­˜æ•°æ®æ—¶ä½¿ç”¨æœ€å¹¿æ³›çš„ç¼–ç ã€‚
- UTF-16 ä»ç„¶æœ‰æ—¶è¢«ç”¨ä½œå†…å­˜è¡¨ç¤ºã€‚
- å­—ç¬¦ä¸²çš„ä¸¤ä¸ªæœ€é‡è¦çš„è§†å›¾æ˜¯å­—èŠ‚ï¼ˆåˆ†é…å†…å­˜/å¤åˆ¶/ç¼–ç /è§£ç ï¼‰å’Œæ‰©å±•å­—ä½ç°‡ï¼ˆæ‰€æœ‰è¯­ä¹‰æ“ä½œï¼‰ã€‚
- ä»¥ç ä½ä¸ºå•ä½æ¥è¿­ä»£å­—ç¬¦ä¸²æ˜¯é”™è¯¯çš„ã€‚å®ƒä»¬ä¸æ˜¯ä¹¦å†™çš„åŸºæœ¬å•ä½ã€‚ä¸€ä¸ªå­—ä½å¯èƒ½ç”±å¤šä¸ªç ä½ç»„æˆã€‚
- è¦æ£€æµ‹å­—ä½çš„è¾¹ç•Œï¼Œä½ éœ€è¦è¡¨æ ¼ã€‚
- å¯¹äºæ‰€æœ‰ Unicode ç›¸å…³çš„ä¸œè¥¿ï¼Œç”šè‡³æ˜¯åƒ `strlen`ã€`indexOf` å’Œ `substring` è¿™æ ·çš„æ— èŠçš„ä¸œè¥¿ï¼Œéƒ½è¦ä½¿ç”¨ Unicode åº“ã€‚
- Unicode æ¯å¹´æ›´æ–°ä¸€æ¬¡ï¼Œè§„åˆ™æœ‰æ—¶ä¼šæ”¹å˜ã€‚
- Unicode å­—ç¬¦ä¸²åœ¨æ¯”è¾ƒä¹‹å‰éœ€è¦è¿›è¡Œå½’ä¸€åŒ–ã€‚
- Unicode åœ¨æŸäº›æ“ä½œå’Œæ¸²æŸ“ä¸­ä¾èµ–äºåŒºåŸŸè®¾ç½®ã€‚
- å³ä½¿æ˜¯çº¯è‹±æ–‡æ–‡æœ¬ï¼Œè¿™äº›éƒ½å¾ˆé‡è¦ã€‚

## ä½¿ç”¨æ­£åˆ™åŒ¹é… emoji

### TL;DR

```typescript
/\p{Emoji_Presentation}/gu.test("ä½ å¥½hello123ğŸ˜„hiğŸŒ·456ğŸ‰") // true
/\p{Emoji_Presentation}/gu.test("ä½ å¥½hello123") // false
```

### ä½¿ç”¨ `\p{...}`

`\p{...}`, `\P{...}` æ˜¯ [Unicode character class escape](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Regular_expressions/Unicode_character_class_escape#browser_compatibility)ï¼Œä¹Ÿæ˜¯ä¸€ç§è½¬è¯‘å­—ç¬¦ç±»ï¼ˆä¸€ç±»å­—ç¬¦çš„é›†åˆè¡¨ç¤ºï¼Œæ¯”å¦‚ `\d` æ˜¯ `[0-9]`ï¼Œ`\s`ï¼Œ`\w`ï¼‰ï¼Œè¿™é‡Œæ˜¯å¯ä»¥é€šè¿‡è®¾ç½® Unicode property æ¥åŒ¹é…ç›¸å…³çš„å­—ç¬¦ï¼Œå¿…é¡»å¼€å¯ `u` è¿™ä¸ª [unicode flag](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/unicode#unicode-aware_mode)

```javascript
\p{loneProperty}
\P{loneProperty}

\p{property=value}
\P{property=value}
```

loneProperty å¯ä»¥å‚é˜…ï¼šhttps://tc39.es/ecma262/multipage/text-processing.html#table-binary-unicode-properties

å…¼å®¹æ€§ï¼šå…¨æ”¯æŒ

- chrome 64
- nodejs 10
